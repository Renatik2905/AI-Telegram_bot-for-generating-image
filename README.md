# Telegram Bot for AI Image Generation

Этот проект представляет собой Telegram-бота, который использует Hugging Face API для генерации изображений на основе текстовых описаний, предоставляемых пользователями. Бот позволяет пользователям отправлять текстовые запросы на русском языке, которые затем переводятся на английский и используются для генерации изображения.

## Особенности

-   **Генерация изображений:** Использует Hugging Face API и модель `stabilityai/stable-diffusion-2` для генерации изображений.
-   **Поддержка русского языка:** Пользователи могут вводить запросы на русском языке, которые автоматически переводятся на английский перед генерацией изображения.
-   **Обработка ошибок:** Бот обрабатывает ошибки, возникающие при запросах к API или переводе текста, и отправляет пользователям соответствующие сообщения.
-   **Логирование:** Вся важная информация о работе бота, включая ошибки и запросы пользователей, записывается в лог.
-   **Простота использования:** Бот легко настраивается через переменные окружения, что позволяет запускать его без изменений в коде.

## Требования

-   Python 3.6+
-   Установленные библиотеки (указаны ниже)
-   Токен Telegram-бота (получить у BotFather)
-   Токен Hugging Face API (получить на сайте Hugging Face)

## Установка и запуск

1.  **Клонируйте репозиторий:**

    ```bash
    git clone [URL вашего репозитория]
    cd [название_вашего_репозитория]
    ```

2.  **Создайте и активируйте виртуальное окружение:**
      ```bash
      python -m venv venv
      # Для Windows
      venv\Scripts\activate
      # Для Linux/macOS
      source venv/bin/activate
     ```

3.  **Установите необходимые библиотеки:**

    ```bash
    pip install python-dotenv telebot requests googletrans==4.0.0-rc1
    ```

4.  **Создайте файл `.env` и добавьте в него свои токены:**

    ```env
    TELEGRAM_BOT_TOKEN=YOUR_TELEGRAM_BOT_TOKEN
    HUGGINGFACE_API_TOKEN=YOUR_HUGGINGFACE_API_TOKEN
    ```

    Замените `YOUR_TELEGRAM_BOT_TOKEN` и `YOUR_HUGGINGFACE_API_TOKEN` своими токенами.

5.  **Запустите бота:**

    ```bash
    python bot.py
    ```

## Структура файлов

-   **`bot.py`:** Основной файл с логикой бота.
    - Загружает переменные окружения (токены) из файла `.env`.
    - Создаёт экземпляр Telegram-бота `telebot.TeleBot`.
    - Настраивает логирование для отслеживания событий и ошибок.
    - Определяет обработчики для команды `/start` и для текстовых сообщений.
    - Переводит сообщения пользователя на английский, отправляет запрос в Hugging Face API и возвращает сгенерированное изображение пользователю.
    - Обрабатывает ошибки и выводит пользователю соответствующие сообщения.
-   **`text_to_image.py`:** Содержит класс `Text2ImageAPI` для работы с Hugging Face API.
    - Инициализирует класс с токеном Hugging Face API и устанавливает базовые параметры.
    - Определяет функцию `generate_image` для отправки запросов к Hugging Face API и возврата сгенерированных изображений.
    - Обрабатывает возможные ошибки при запросах и переводах текста.
-   **.env:** Файл для хранения токенов и других конфиденциальных данных.
-  **README.md:** Описание проекта, установка и руководство пользователя.

## Как использовать

1.  Запустите бота.
2.  Отправьте боту команду `/start`.
3.  Отправьте боту текстовое сообщение на русском языке с описанием желаемого изображения.
4.  Бот сгенерирует изображение и отправит его вам в чат.

## Благодарности

-   [Hugging Face](https://huggingface.co) за предоставление API для генерации изображений.
-   [Python Telegram Bot](https://github.com/eternnoir/pyTelegramBotAPI) за библиотеку для создания Telegram ботов.
-   [googletrans](https://pypi.org/project/googletrans/) за библиотеку для перевода текста.
